<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>マイページ|子供食堂</title>
<meta name="robots" content="index, follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="マイページ|子供食堂">
<meta name="format-detection" content="telephone=no">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600&family=Zen+Maru+Gothic:wght@500&display=swap" rel="stylesheet">
<link href="files/css/base.css" rel="stylesheet" type="text/css">
<style>
body {
  font-family: 'Noto Sans JP', sans-serif;
}
.ff-zen_maru {
  font-family: 'Zen Maru Gothic', sans-serif;
}
.max-1800 {
  max-width: 1800px;
}
.main-img {
  height: 30vmax;
  max-height: 450px;
  width: 100%;
}
.user-img {
  margin-top: max(-50%, -80px);
}
.top-icons {
  left: var(--icon-left, auto);
  right: var(--icon-right, auto);
  top: var(--icon-top, auto);
  bottom: var(--icon-bottom, auto);
  width: var(--icon-width, auto);
  height: auto;
}
.line-title {
  background-image : linear-gradient(to right, var(--bs-border-color) 8px, transparent 8px);
  background-size: 16px 2.5px;
  background-repeat: repeat-x;
  background-position: left 50%;
}
.btn[data-bs-target="#modal_main_bg_edit"], .btn[data-bs-target="#modal_userimg_edit"], .btn[data-bs-target="#modal_spot_edit"] {
  background-color: rgba(0,0,0,.3);
}
.btn[data-bs-target="#modal_userimg_edit"] {
  margin-bottom: -10px;
  margin-right: -10px
}
.msk-circle canvas {
  mix-blend-mode: darken;
}
.msk-circle {
  background-image: radial-gradient(circle closest-side, transparent 99%, #999 100%);
}
.grid-title {
  grid-template-columns: 48px 1fr;
}
.grid-title :first-child {
  grid-row: 1 / 3;
  width: 90%;
  height: auto;
}
.bg-beige {
  background-color: #c9a063;
}
.page-link {
  width: 2.5em;
  line-height: 2.5em;
  color: var(--bs-primary);
}
.page-item.active .page-link {
  background-color: var(--bs-primary);
}
.page-item.disabled .page-link {
  background-color: var(--bs-gray-200);
  color: var(--bs-gray-400);
}
.grid-2-auto {
  grid-template-columns: 100px 100px;
  justify-content: center;
  grid-gap: 40px 60px
}
.img-map {
  height: max(120px, 30vmin);
}
.icon-spot, .icon-spot-heart {
  height: 32px;
  width: 32px
}
.icon-spot-heart {
  width: auto;
  min-width: 32px
}
.grid-auto-fill {
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
}
.icon-on, .spot-select:checked +* .icon-off {
  display: none
}
.spot-select:checked +* .icon-on {
  display: block
}

@media (min-width:768px) {/*TAB,PC*/
body {
  font-size: 1.2rem
}
.main-img {
  border-radius: 1em;
}
.btn[data-bs-target="#modal_userimg_edit"] {
  margin-bottom: 0;
  margin-right: 0
}
.grid-title {
  grid-template-columns: 60px 1fr;
}
.grid-2-auto {
  grid-template-columns: repeat(auto-fill, 120px);
  justify-content: flex-start;
  grid-gap: 20px 40px
}
.icon-spot, .icon-spot-heart {
  height: 50px;
  width: 50px
}
.icon-spot-heart {
  min-width: 50px
}
}

@media (min-width:992px) {/*PC*/
.top-icons:nth-child(n+5) {
  top: calc(var(--icon-top, auto) - 80px);
}
.grid-1-2 {
  grid-template-columns: 1fr 1fr;
}
.icon-lg-spot {
  width: 30px;
  height: 30px;
}
}

@media (min-width:2001px) {
footer {
  margin-top: 100px;
}
}

@media (max-width:767px) {/*SP*/
}
</style>
</head>

<body class="bg-light">
<header class="ps-2 w-100 position-sticky">
  <div class="rounded-bottom-100 overflow-hidden move">
    <h1 class="text-center col-10 col-lg-6 mx-auto bg-primary text-white mb-0 ff-zen_maru">子育て世代で作る子ども情報ポータル</h1>
  </div>
  <div class="d-flex justify-content-between move max-1800 mx-auto align-items-end">
    <div class="col-5 col-md-6 col-lg-3 max-280 text-center mb-2 move"><img src="files/img/logo_sodate_kids.svg" alt="" width="300" height="107" class="img-fluid"></div>
    <div class="d-none d-lg-flex p-0 small w-100 justify-content-evenly max-720 top-menu align-items-center mb-3"> <a href="###" class="text-decoration-none text-body small">はじめのページ</a>| <a href="###" class="text-decoration-none text-body small">利用規約（ルール）</a>| <a href="###" class="text-decoration-none text-body small">使い方（つかいかた）</a>| <a href="###" class="text-decoration-none text-body small">お問い合わせ</a> </div>
    <div class="d-flex align-items-center gap-1 gap-lg-2 col-7 col-lg-2 gap-1 justify-content-end pe-2 filter-drop-shadow pt-3 move max-280"> <a href="###" class="btn btn-success rounded-circle p-0 d-flex flex-column justify-content-center square-w col-3 col-md-5 max-80">
      <div><img src="files/img/icon_group_w.svg" alt="" width="32" height="28"></div>
      <div class="smaller fw-bold">団体様へ</div>
      </a> <a href="###" class="btn btn-primary rounded-circle p-0 d-flex flex-column justify-content-center square-w col-3 col-md-5 max-80">
      <div><img src="files/img/icon_user_w.svg" alt="" width="32" height="28"></div>
      <div class="smaller fw-bold">ログイン</div>
      </a>
      <button class="btn bg-white rounded-circle p-0 d-flex justify-content-center align-items-center square-w col-3 col-md-5 max-80 d-lg-none" aria-label="メニューボタン" data-bs-toggle="offcanvas" data-bs-target="#offcanvas_menu" aria-controls="offcanvas_menu"><img src="files/img/icon_hamburger.svg" alt="" width="28" height="28"></button>
    </div>
  </div>
</header>
<div class="offcanvas offcanvas-end w-100 max-560 bg-light" tabindex="-1" id="offcanvas_menu">
  <div class="offcanvas-header py-1 justify-content-end">
    <button type="button" class="btn p-0 fs-3 text-primary" data-bs-dismiss="offcanvas" aria-label="Close"><i class="bi bi-x-lg"></i></button>
  </div>
  <div class="offcanvas-body text-center">
    <div class="col-8 max-320 mb-1 mx-auto"><img src="files/img/logo_sodate_kids.svg" alt="" width="400" height="200" class="img-fluid"></div>
    <p class="small ff-zen_maru">子供たちのための子ども食堂検索サイト</p>
    <div class="d-flex justify-content-center mb-5 pb-4"> <a href="index.html" class="d-flex align-items-center flex-column pe-5 border-end text-decoration-none text-body" data-bs-dismiss="offcanvas">
      <div class="mb-2 btn-success p-4 rounded-circle"><img src="files/img/icon_group_w.svg" alt="" width="50" height="50"></div>
      <span class="fs-5">団体様へ</span></a> <a href="index.html" data-bs-dismiss="offcanvas" class="d-flex align-items-center flex-column ps-5 text-decoration-none text-body">
      <div class="mb-2 btn-primary p-4 rounded-circle"><img src="files/img/icon_user_w.svg" alt="" width="50" height="50"></div>
      <span class="fs-5">ログイン</span></a> </div>
    <a href="index.html" data-bs-dismiss="offcanvas" class="btn btn-block col-10 mx-auto border-bottom">はじめのページ</a> <a href="index.html" data-bs-dismiss="offcanvas" class="btn btn-block col-10 mx-auto border-bottom">利用規約（ルール）</a> <a href="index.html" data-bs-dismiss="offcanvas" class="btn btn-block col-10 mx-auto">使い方（つかいかた）</a> <a href="index.html" data-bs-dismiss="offcanvas" class="btn ff-zen_maru bg-danger-subtle text-danger d-flex gap-3 col-8 justify-content-center align-items-center mx-auto filter-drop-shadow my-4"><img src="files/img/icon_donation.svg" alt="" width="40" height="40">寄付の申し込み</a> </div>
</div>
<main>
  <article>
    <section class="pt-3">
      <h2 class="btn-primary text-white ff-zen_maru text-center py-3 ffs-palt mb-0">[利用者]マイページ</h2>
      <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb" class="container py-2">
        <ol class="breadcrumb mb-0 ffs-palt align-items-center">
          <li class="breadcrumb-item"><a href="index.html" class="text-decoration-none text-body py-1">Home</a></li>
          <li class="breadcrumb-item active text-body" aria-current="page">マイページ</li>
        </ol>
      </nav>
      <div class="container px-0 position-relative" onClick="f_canvasSet(this)"> <img src="files/img/user_top.webp" alt="" width="1000" height="667" class="main-img img-cover">
        <button class="btn position-absolute end-0 bottom-0 px-3 py-2 mb-2 me-2 lh-1" data-bs-toggle="modal" data-bs-target="#modal_main_bg_edit"><img src="files/img/icon_camera_w.svg" alt="写真変更" width="20" height="16" class=""></button>
      </div>
      <div class="container d-flex gap-2 ps-md-5 align-items-end" style="margin-top: max(-24px ,-3vw)">
        <div class="col-3 max-120 ps-3"> <img src="files/img/user02.jpg" alt="" width="500" height="500" class="img-cover square-w h-auto rounded-circle filter-drop-shadow w-100"> </div>
        <div class="d-flex mb-2">
          <div>
            <div class="fw-bold fs-5">なまえ（非公開）</div>
            <div class="small">ニックネーム：○○○</div>
          </div>
          <a href="edit_family.html" class="btn p-0"><img src="files/img/icon_edit.svg" alt="" width="20" height="20"><span class="small ps-2">編集</span></a> </div>
      </div>
    </section>
    <section>
      <div class="container pt-5 pb-5">
        <div class="d-flex align-items-center gap-2 mb-3"> <span class="btn-primary d-block p-2 rounded-circle"><img src="files/img/icon_pin_w.svg" alt="" width="30" height="30"></span>
          <div class="border-bottom d-flex w-100 align-items-center justify-content-between py-1">
            <h3 class="fw-bold fs-5 mb-0">私のスポット</h3>
            <button class="btn btn-sm btn-outline-primary py-1 px-2 fw-bold" data-bs-toggle="modal" data-bs-target="#modal-add-spot"><i class="bi bi-plus"></i>追加する</button>
          </div>
          <a href="edit_family.html" class="btn d-grid py-0 px-2 lh-1 align-content-around"><img src="files/img/icon_edit.svg" alt="" width="30" height="30"><span class="small">編集</span></a> </div>
        <div class="col-md-11 mx-auto">
          <p class="fw-bold ffs-palt ls-1">おすすめの場所を教えてくれませんか？</p>
          <p class="ffs-palt ls-1">子どもがいると外食や遊び場選びも大変…。◎◎さんが知っているおすすめの場所を教えてくれませんか？</p>
          <div> <img src="files/img/img_map.webp" alt="" width="1600" height="500" class="img-cover w-100 img-map"> </div>
          <ul class="ps-0">
            <li class="d-flex gap-1 gap-md-4 py-3 small border-bottom">
              <div class="position-relative pe-3 col-4 col-md-3 max-240"> <img src="files/img/shop_01.webp" alt="" width="1500" height="1000" class="img-cover w-100 h-100 rounded-5"> <img src="files/img/icon_restaurant_off.webp" alt="" width="123" height="151" class="position-absolute bottom-0 end-0 col-3 h-auto"> </div>
              <div class="ffs-palt d-grid w-100">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="fw-bold three-point-1">町の中華や「太郎圏」港区支店</div>
                  <div class="d-flex gap-1"><span class="bg-white rounded-3 d-grid text-center fw-bold lh-1 align-content-center icon-spot-heart"><i class="bi bi-heart-fill text-primary small"></i><span class="smaller">123</span></span><img src="files/img/icon-sm_age_0-1_on.webp" alt="" width="50" height="50" class="rounded-3 icon-spot"><img src="files/img/icon-sm_age_1-3_on.webp" alt="" width="50" height="50" class="rounded-3 icon-spot"></div>
                </div>
                <div class="d-flex justify-content-between align-items-center gap-1">
                  <div class="small three-point-2">よくある町中華屋さん。店内は広くベビーカーOK。近所の子供たちもよくいます。チャーハンが人気です。</div>
                  <button class="btn btn-sm px-2 py-1 bg-gray-600 text-white text-nowrap">編集</button>
                </div>
              </div>
            </li>
            <li class="d-flex gap-1 gap-md-4 py-3 small">
              <div class="position-relative pe-3 col-4 col-md-3 max-240"> <img src="files/img/shop_02.webp" alt="" width="1500" height="1000" class="img-cover w-100 h-100 rounded-5"> <img src="files/img/icon_playground_off.webp" alt="" width="123" height="151" class="position-absolute bottom-0 end-0 col-3 h-auto"> </div>
              <div class="ffs-palt d-grid w-100">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="fw-bold three-point-1">世田谷図書館</div>
                  <div class="d-flex gap-1"><span class="bg-white rounded-3 d-grid text-center fw-bold lh-1 align-content-center icon-spot-heart"><i class="bi bi-heart-fill text-primary small"></i><span class="smaller">888888</span></span><img src="files/img/icon-sm_age_0-1_on.webp" alt="" width="50" height="50" class="rounded-3 icon-spot"><img src="files/img/icon-sm_age_1-3_on.webp" alt="" width="50" height="50" class="rounded-3 icon-spot"></div>
                </div>
                <div class="d-flex justify-content-between align-items-center gap-1">
                  <div class="small three-point-2">図書館ですが５Fに自由に遊べる体育館があります。プレイマットあり </div>
                  <button class="btn btn-sm px-2 py-1 bg-gray-600 text-white text-nowrap">編集</button>
                </div>
              </div>
            </li>
          </ul>
          <nav aria-label="ページネーション">
            <ul class="pagination justify-content-center gap-2 text-center align-items-center">
              <li class="page-item"><a class="page-link rounded-circle badge-square border-0 p-0" href="#">1</a></li>
              <i class="bi bi-three-dots text-primary"></i>
              <li class="page-item"> <a class="page-link rounded-circle badge-square border-0 p-0" href="#">3</a> </li>
              <li class="page-item"><a class="page-link rounded-circle badge-square border-0 p-0" href="#">4</a></li>
              <li class="page-item active"><a class="page-link rounded-circle badge-square border-0 p-0" href="#">5</a></li>
              <li class="page-item"><a class="page-link rounded-circle badge-square border-0 p-0" href="#">6</a></li>
              <li class="page-item"><a class="page-link rounded-circle badge-square border-0 p-0" href="#">7</a></li>
              <i class="bi bi-three-dots text-primary"></i>
              <li class="page-item"><a class="page-link rounded-circle badge-square border-0 p-0" href="#">9</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </section>
    <section>
      <div class="container pt-5 pb-5">
        <div class="d-flex align-items-center gap-2 mb-3"> <span class="btn-primary d-block p-2 rounded-circle"><img src="files/img/icon_profile_w.svg" alt="" width="30" height="30"></span>
          <div class="border-bottom d-flex w-100 align-items-center justify-content-between py-1">
            <h3 class="fw-bold fs-5 mb-0">アカウント</h3>
            <a href="###" class="btn btn-sm btn-outline-primary py-1 px-2 fw-bold"><i class="bi bi-plus"></i>招待する</a></div>
          <a href="edit_family.html" class="btn d-grid py-0 px-2 lh-1 align-content-around"><img src="files/img/icon_edit.svg" alt="" width="30" height="30"><span class="small">編集</span></a> </div>
        <div class="d-grid grid-2-auto col-md-11 mx-auto"> <a href="edit_family.html" class="text-center text-decoration-none text-body fw-bold"><img src="files/img/user02.jpg" alt="" width="500" height="500" class="img-cover square-w w-100 h-auto rounded-circle filter-drop-shadow mb-1">
          <div>なまえ</div>
          </a> <a href="edit_family.html" class="text-center text-decoration-none text-body fw-bold"><img src="files/img/user03.jpg" alt="" width="500" height="500" class="img-cover square-w w-100 h-auto rounded-circle filter-drop-shadow mb-1">
          <div>なまえ</div>
          </a> </div>
      </div>
    </section>
    <section>
      <div class="container pb-5">
        <div class="d-flex align-items-center gap-2 mb-3"> <span class="btn-primary d-block p-2 rounded-circle"><img src="files/img/icon_group_w.svg" alt="" width="30" height="30"></span>
          <h3 class="fw-bold fs-5 border-bottom py-1 w-100 mb-0">子供たち</h3>
          <a href="edit_kids.html" class="btn d-grid py-0 px-2 lh-1 align-content-around"><img src="files/img/icon_files.svg" alt="" width="30" height="30"><span class="small">編集</span></a> </div>
        <ul class="ps-0 d-grid grid-1-2 gap-3 mb-4 col-md-11 mx-auto">
          <li class="d-flex bg-white rounded-5 gap-2 flex-fill p-3 align-items-center position-relative pe-5">
            <div class="col-4 fw-bold text-center">
              <h5 class="fw-bold fs-6">山田　太郎</h5>
              <div class="small">（非公開）</div>
            </div>
            <ul class="ps-0 small">
              <li class="d-block">ニックネーム：たーくん</li>
              <li class="d-block">性別：XX</li>
              <li class="d-block">生年月日：XXXX年 XX月 XX日</li>
              <li class="d-block">年齢：0歳</li>
            </ul>
            <a href="edit_kids.html" class="btn btn-sm bg-primary text-white p-0 text-nowrap d-grid smaller square-h position-absolute top-0 end-0 mt-1 me-1"> <img src="files/img/icon_edit_w.svg" alt="" width="40" height="20" class="mt-1"> <span class="lh-1 pb-1">編集</span></a> </li>
          <li class="d-flex bg-white rounded-5 gap-2 flex-fill p-3 align-items-center position-relative pe-5">
            <div class="col-4 fw-bold text-center">
              <h5 class="fw-bold fs-6">山田　花子</h5>
              <div class="small">（非公開）</div>
            </div>
            <ul class="ps-0 small">
              <li class="d-block">ニックネーム：はーちゃん</li>
              <li class="d-block">性別：XX</li>
              <li class="d-block">生年月日：XXXX年 XX月 XX日</li>
              <li class="d-block">年齢：0歳</li>
            </ul>
            <a href="edit_kids.html" class="btn btn-sm bg-primary text-white p-0 text-nowrap d-grid smaller square-h position-absolute top-0 end-0 mt-1 me-1"> <img src="files/img/icon_edit_w.svg" alt="" width="40" height="20" class="mt-1"> <span class="lh-1 pb-1">編集</span></a> </li>
        </ul>
      </div>
    </section>
  </article>
</main>
<!-- Modal -->
<div class="modal fade" id="modal_main_bg_edit" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header border-0 bg-primary text-white">
        <h5 class="modal-title fw-bold">メインの画像</h5>
        <button type="button" class="btn p-0" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg text-white fs-5"></i></button>
      </div>
      <div class="modal-body pb-0">
        <label for="preview_form_main_bg" class="form-label">画像を選択してください</label>
        <input class="form-control mb-3" type="file" id="preview_form_main_bg" onChange="f_imgChange(this)">
        <canvas width="1320" height="640" class="w-100 d-block"></canvas>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn bg-primary text-white" onClick="f_sendImg(this)" data-bs-dismiss="modal">設定する</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="modal_spot_edit" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header border-0 bg-primary text-white">
        <h5 class="modal-title fw-bold">スポットの画像とテキスト</h5>
        <button type="button" class="btn p-0" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg text-white fs-5"></i></button>
      </div>
      <div class="modal-body pb-0">
        <label for="preview_form_spot" class="form-label">画像を選択してください</label>
        <input class="form-control mb-3" type="file" id="preview_form_spot" onChange="f_imgChange(this)">
        <canvas width="1500" height="1000" class="w-100 d-block"></canvas>
        <div class="mb-3">
          <label for="introduction-title" class="form-label">タイトル</label>
          <input name="introduction-title" type="text" class="form-control" id="introduction-title">
        </div>
        <div class="mb-3">
          <label for="introduction-text" class="form-label">紹介文</label>
          <textarea class="form-control" id="introduction-text" rows="3"></textarea>
        </div>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn bg-primary text-white" onClick="f_sendImg(this)" data-bs-toggle="modal" data-bs-target="#modal-add-spot">設定する</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade show+ d-block+" id="modal-add-spot" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg pt-4">
    <div class="modal-content border-0 overflow-visible">
      <div class="modal-header border-0"> <span class="d-block rounded-circle border border-2 border-white position-absolute top-0 start-50 overflow-hidden square-w" style="margin-top: -25px;margin-left: -25px"><span class="btn-primary d-block p-2"><img src="files/img/icon_pin_w.svg" alt="" width="30" height="30"></span></span>
        <h4 class="modal-title fs-5 text-center w-100 fw-bold pt-3">おすすめのスポットを追加</h4>
      </div>
      <div class="modal-body pt-0">
        <div> <img src="files/img/img_map.webp" alt="" width="1600" height="500" class="img-cover w-100 img-map mb-3"> </div>
        <input name="placename" type="text" class="form-control mb-3" id="placename" placeholder="場所の名前">
        <dl>
          <dt class="mb-2"><span class="fs-5">種類</span>（1個を選択）</dt>
          <dd class="d-grid grid-auto-fill gap-2">
            <label>
            <input class="spot-select d-none" type="radio" name="spot-category" id="spot-category-restaurant">
            <div> <img src="files/img/icon_category_restaurant_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_category_restaurant_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="radio" name="spot-category" id="spot-category-playground">
            <div> <img src="files/img/icon_category_playground_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_category_playground_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="radio" name="spot-category" id="spot-category-mall">
            <div> <img src="files/img/icon_category_mall_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_category_mall_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="radio" name="spot-category" id="spot-category-tmpchildcare">
            <div> <img src="files/img/icon_category_tmpchildcare_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_category_tmpchildcare_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="radio" name="spot-category" id="spot-category-restroom">
            <div> <img src="files/img/icon_category_restroom_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_category_restroom_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="radio" name="spot-category" id="spot-category-ather">
            <div> <img src="files/img/icon_category_ather_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_category_ather_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
          </dd>
        </dl>
        <dl class="pb-3">
          <dt class="mb-2"><span class="fs-5">おすすめ時期</span>（複数選択可能）
            <div class="fw-normal small">この場所がおすすめな時期を選択（複数）して下さい。</div>
          </dt>
          <dd class="d-grid grid-auto-fill gap-2">
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-age" id="spot-age_0-1">
            <div> <img src="files/img/icon_age_0-1_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_age_0-1_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-age" id="spot-age_1-3">
            <div> <img src="files/img/icon_age_1-3_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_age_1-3_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-age" id="spot-age_3-6">
            <div> <img src="files/img/icon_age_3-6_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_age_3-6_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-age" id="spot-age_6-12">
            <div> <img src="files/img/icon_age_6-12_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_age_6-12_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
          </dd>
        </dl>
        <dl class="border-bottom pb-3 mb-4">
          <dt class="mb-2"><span class="fs-5">設備</span>（複数選択可能）</dt>
          <dd class="d-grid grid-auto-fill gap-2">
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-facilities" id="spot-facilities_nursery">
            <div> <img src="files/img/icon_facilities_nursery_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_feature_pushchair-ok_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-facilities" id="spot-facilities_r-pushchair">
            <div> <img src="files/img/icon_facilities_r-pushchair_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_facilities_r-pushchair_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-facilities" id="spot-facilities_p-room">
            <div> <img src="files/img/icon_facilities_p-room_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_facilities_p-room_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-facilities" id="spot-facilities_babyfood">
            <div> <img src="files/img/icon_facilities_babyfood_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_facilities_babyfood_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
          </dd>
        </dl>
        <input name="feature" type="text" class="form-control mb-3" id="feature" placeholder="その他の設備">
        <dl class="border-bottom pb-3 mb-4">
          <dt class="mb-2"><span class="fs-5">その他の設備</span>（複数選択可能）</dt>
          <dd class="d-grid grid-auto-fill gap-2">
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-feature" id="spot-feature_pushchair-ok">
            <div> <img src="files/img/icon_feature_pushchair-ok_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_feature_pushchair-ok_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-feature" id="spot-feature_switchboard">
            <div> <img src="files/img/icon_feature_switchboard_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_feature_switchboard_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-feature" id="spot-feature_kidschair">
            <div> <img src="files/img/icon_feature_kidschair_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_feature_kidschair_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
            <label>
            <input class="spot-select d-none" type="checkbox" name="spot-feature" id="spot-featurerainy-ok">
            <div> <img src="files/img/icon_featurerainy-ok_off.webp" alt="" width="142" height="110" class="img-fluid icon-off"> <img src="files/img/icon_featurerainy-ok_on.webp" alt="" width="142" height="110" class="img-fluid icon-on"> </div>
            </label>
          </dd>
        </dl>
        <dl>
          <dt class="fs-5 mb-2">施設紹介</dt>
          <dd class="py-2" onclick="f_canvasSet(this)">
            <h4 class="fw-bold fs-6 js-title">町の中華や「太郎圏」</h4>
            <div class="d-flex gap-2 align-items-center">
              <div class="position-relative col-4 col-md-3 max-240"> <img src="files/img/no_image.webp" alt="" width="1200" height="800" class="img-cover w-100 h-100 rounded-5">
                <button class="btn position-absolute end-0 bottom-0 p-1 mb-1 me-1 rounded-circle d-flex" data-bs-toggle="modal" data-bs-target="#modal_spot_edit"><img src="files/img/icon_camera_w.svg" alt="写真変更" width="18" height="18" class=""></button>
              </div>
              <div class="three-point-3 small js-introduction w-100">説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文</div>
              <div class="d-grid gap-1 gap-lg-2">
                <button class="btn border-0 bg-gray-300 p-2 d-flex"><img src="files/img/icon_trash.svg" alt="" width="20" height="20" class="icon-lg-spot"></button>
                <button class="btn border-0 bg-gray-300 p-2 d-flex"><img src="files/img/icon_download.svg" alt="" width="20" height="20" class="icon-lg-spot"></button>
              </div>
            </div>
          </dd>
          <dd class="py-2">
            <h4 class="fw-bold fs-6">町の中華や「太郎圏」</h4>
            <div class="d-flex gap-2 align-items-center">
              <div class="position-relative col-4 col-md-3 max-240" onclick="f_canvasSet(this)"> <img src="files/img/no_image.webp" alt="" width="1200" height="800" class="img-cover w-100 h-100 rounded-5">
                <button class="btn position-absolute end-0 bottom-0 p-1 mb-1 me-1 rounded-circle d-flex" data-bs-toggle="modal" data-bs-target="#modal_spot_edit"><img src="files/img/icon_camera_w.svg" alt="写真変更" width="18" height="18" class=""></button>
              </div>
              <div class="three-point-3 small js-introduction w-100">説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文説明文</div>
              <div class="d-grid gap-1 gap-lg-2">
                <button class="btn border-0 bg-gray-300 p-2 d-flex"><img src="files/img/icon_trash.svg" alt="" width="20" height="20" class="icon-lg-spot"></button>
                <button class="btn border-0 bg-gray-300 p-2 d-flex"><img src="files/img/icon_download.svg" alt="" width="20" height="20" class="icon-lg-spot"></button>
              </div>
            </div>
          </dd>
          <dd class="text-center border-bottom" onclick="f_canvasSet(this)">
            <button class="btn btn-outline-primary bg-white" style="margin-bottom: -21px" data-bs-toggle="modal" data-bs-target="#modal_spot_edit">＋写真と説明を追加</button>
          </dd>
        </dl>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-sm" data-bs-dismiss="modal">キャンセル</button>
        <button type="button" class="btn btn-warning" data-bs-dismiss="modal">登録 / 更新する</button>
      </div>
    </div>
  </div>
</div>
<footer class="">
  <div class="d-lg-flex align-items-center container mb-lg-4">
    <div class="mx-auto d-gap max-600 mb-4 col-lg-5 text-center">
      <div class="col-7 mx-auto"><img src="files/img/logo_sodate_kids.svg" alt="" width="300" height="107" class="img-fluid"></div>
      <span class="ff-zen_maru small lh-sm">子育て世代で作る子ども情報ポータル</span></div>
    <div class="d-flex container px-lg-0 mb-4 mb-lg-0 flex-lg-column small justify-content-evenly">
      <ul class="footer-link ps-0 mb-0 fw-bold d-lg-flex justify-content-evenly">
        <li class="d-block w-100"><a href="###" class="d-block text-body text-decoration-none py-2">はじめのページ</a></li>
        <li class="d-block w-100"><a href="###" class="d-block text-body text-decoration-none py-2">利用規約（ルール）</a></li>
        <li class="d-block w-100"><a href="###" class="d-block text-body text-decoration-none py-2">使い方（つかいかた）</a></li>
      </ul>
      <ul class="footer-link ps-0 mb-0 fw-bold d-lg-flex">
        <li class="d-block w-100"><a href="###" class="d-block text-body text-decoration-none py-2">個人情報保護方針</a></li>
        <li class="d-block w-100"><a href="###" class="d-block text-body text-decoration-none py-2">プライバシーポリシー</a></li>
        <li class="d-block w-100"><a href="###" class="d-block text-body text-decoration-none py-2">お問い合わせ</a></li>
      </ul>
    </div>
  </div>
  <p class="text-center small py-3 mb-0 border-top"> Copyright&copy;SODATE KIDS.All rights reserved. </p>
</footer>
<div id="menu_top" class="move js-menutop col-4 max-80 pe-4" style="z-index: 1040">
  <div class="rounded-circle filter-drop-shadow bg-white square-w d-flex justify-content-center align-items-center"> <i class="bi bi-arrow-up fs-2"></i></div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script> 
<script>
/*画像操作*/
let e_modalCanvas;
let e_context;
let e_img;
let isDragging = false;
let startX;
let startY;
let lastX = 0;
let lastY = 0;
let newX = 0;
let newY = 0;
let newWidth;
let newHeight;
let scale = 1;
let ratio = 1;
let v_width;
let v_height;
let e_imgTarget;
let e_introduction;
let e_introductionTitle;
let e_introductionText;
const v_noimageUrl='files/img/no_image.webp';

function f_canvasSet(el) {
  e_introduction=el;
  e_modalCanvas = document.querySelector((el.getAttribute('data-bs-target') || el.querySelector('[data-bs-target]').getAttribute('data-bs-target')) + ' canvas');
  e_context = e_modalCanvas.getContext('2d');
  e_img = new Image();
  e_img.onload = () => {
    calculateImageDimensions();
    drawImageOnCanvas();
    e_modalCanvas.addEventListener('touchstart', handleDragStart);
    e_modalCanvas.addEventListener('touchmove', handleTouchMove);
    e_modalCanvas.addEventListener('wheel', handleWheel);
    e_modalCanvas.addEventListener('mousedown', handleDragStart);
    ['mouseup', 'mouseout', 'touchend'].forEach(eventName => e_modalCanvas.addEventListener(eventName, handleDragEnd));
    e_modalCanvas.addEventListener('mousemove', handleMouseMove);
  };
  e_imgTarget = el.querySelector('img');
  if (e_imgTarget) {
    e_img.src = e_imgTarget.getAttribute('src');
  } else {
    e_img.src = v_noimageUrl;
  }
  e_img.src = e_imgTarget.getAttribute('src');
  e_introductionTitle=el.querySelector('.js-title');
  e_introductionText=el.querySelector('.js-introduction');
  const e_title=document.querySelector('#introduction-title');
  const e_text=document.querySelector('#introduction-text');
  if(e_introductionTitle){
    e_title.value=e_introductionTitle.innerText
  }else{
    e_title.value=''
  }
  if(e_introductionText){
    e_text.value=e_introductionText.innerText
  }else{
    e_text.value='';
  }
}

function calculateImageDimensions() {
  const { width, height } = e_img;
  const widthRatio = e_modalCanvas.width / width;
  const heightRatio = e_modalCanvas.height / height;
  ratio = Math.max(widthRatio, heightRatio);
  v_width = width * ratio;
  v_height = height * ratio;
  newX = Math.min((e_modalCanvas.width - v_width) / 2, 0);
  newY = Math.min((e_modalCanvas.height - v_height) / 2, 0);
  newWidth = v_width;
  newHeight = v_height;
}

function drawImageOnCanvas() {
  const { width, height } = e_modalCanvas;
  e_context.clearRect(0, 0, width, height);
  e_context.drawImage(e_img, newX, newY, newWidth, newHeight);
}

function handleDragStart(event) {
  event.preventDefault();
  isDragging = true;
  if (event.touches && event.touches.length > 0) {
    startX = event.touches[0].clientX;
    startY = event.touches[0].clientY;
  } else {
    startX = event.clientX;
    startY = event.clientY;
  }
  lastX = newX;
  lastY = newY;
  if (event.touches && event.touches.length > 1) {
    const [touch1, touch2] = event.touches;
    startX = (touch1.clientX + touch2.clientX) / 2;
    startY = (touch1.clientY + touch2.clientY) / 2;
    v_beforX = startX;
    v_beforY = startY;
    initialDistance = Math.hypot(touch2.clientX - touch1.clientX, touch2.clientY - touch1.clientY);
    initialScale = scale;
  }
}

function handleDragEnd() {
  isDragging = false;
  initialDistance = 0;
  initialScale = scale;
}

function handleTouchMove(event) {
  event.preventDefault();
  if (event.touches.length === 1 && isDragging) {
    const touch = event.touches[0];
    const clientX = touch.clientX;
    const clientY = touch.clientY;
    const deltaX = clientX - startX;
    const deltaY = clientY - startY;
    newX = lastX + deltaX * scale * ratio;
    newY = lastY + deltaY * scale * ratio;
    const minX = e_modalCanvas.width - newWidth;
    const minY = e_modalCanvas.height - newHeight;
    newX = Math.max(Math.min(newX, 0), minX);
    newY = Math.max(Math.min(newY, 0), minY);
    drawImageOnCanvas();
  } else if (event.touches.length > 1) {
    const [touch1, touch2] = event.touches;
    const currentDistance = Math.hypot(touch2.clientX - touch1.clientX, touch2.clientY - touch1.clientY);
    const delta = currentDistance - initialDistance;
    const zoom = 1 + delta * 0.01;
    scale = Math.max(initialScale * zoom, 1);
    const rect = e_modalCanvas.getBoundingClientRect();
    const offsetX = (touch1.clientX + touch2.clientX) / 2;
    const offsetY = (touch1.clientY + touch2.clientY) / 2;
    const preRatioX = (offsetX - newX) / newWidth;
    const preRatioY = (offsetY - newY) / newHeight;
    newWidth = v_width * scale;
    newHeight = v_height * scale;
    newX = offsetX - preRatioX * newWidth + (offsetX - startX) * scale;
    newY = offsetY - preRatioY * newHeight + (offsetY - startY) * scale;
    const minX = e_modalCanvas.width - newWidth;
    const minY = e_modalCanvas.height - newHeight;
    drawImageOnCanvas();
    lastX = newX;
    lastY = newY;
    startX = offsetX;
    startY = offsetY;
  }
}

function handleWheel(event) {
  event.preventDefault();
  const delta = Math.sign(event.deltaY);
  const zoom = delta > 0 ? 0.9 : 1.1;
  scale *= zoom;
  scale = Math.min(Math.max(scale, 1), 4);
  const offsetX = event.clientX - e_modalCanvas.getBoundingClientRect().left;
  const offsetY = event.clientY - e_modalCanvas.getBoundingClientRect().top;
  const preRatioX = (offsetX - newX) / newWidth;
  const preRatioY = (offsetY - newY) / newHeight;
  newWidth = v_width * scale;
  newHeight = v_height * scale;
  newX = offsetX - preRatioX * newWidth;
  newY = offsetY - preRatioY * newHeight;
  const minX = e_modalCanvas.width - newWidth;
  const minY = e_modalCanvas.height - newHeight;
  newX = Math.max(Math.min(newX, 0), minX);
  newY = Math.max(Math.min(newY, 0), minY);
  drawImageOnCanvas();
}

function handleMouseMove(event) {
  if (!isDragging) return;
  newX = lastX + (event.clientX - startX) * scale * ratio;
  newY = lastY + (event.clientY - startY) * scale * ratio;
  const minX = e_modalCanvas.width - newWidth;
  const minY = e_modalCanvas.height - newHeight;
  newX = Math.max(Math.min(newX, 0), minX);
  newY = Math.max(Math.min(newY, 0), minY);
  drawImageOnCanvas();
}

function drawImageOnCanvas() {
  e_context.clearRect(0, 0, e_modalCanvas.width, e_modalCanvas.height);
  e_context.drawImage(e_img, newX, newY, newWidth, newHeight);
}
function f_imgChange(e_file) {
  const e_parent=e_file.parentNode;
  e_modalCanvas=e_parent.querySelector('canvas');
  e_context = e_modalCanvas.getContext('2d');
  e_img = new Image();
  scale = 1;
  e_img.onload = () => {
    const widthRatio = e_modalCanvas.width / e_img.width;
    const heightRatio = e_modalCanvas.height / e_img.height;
    ratio = Math.max(widthRatio, heightRatio);
    v_width = e_img.width * ratio;
    v_height = e_img.height * ratio;
    newX = Math.min((e_modalCanvas.width - v_width) / 2, 0);
    newY = Math.min((e_modalCanvas.height - v_height) / 2, 0);
    newWidth = v_width;
    newHeight = v_height;
    drawImageOnCanvas();
  };
  e_img.src = URL.createObjectURL(e_file.files[0]);
}

/*画像送信*/
const sendUrl = "https://www.send_img.com"; // 送信先のURL
function f_sendImg(el) {
  const e_modalFadeId=el.closest('.modal.fade').getAttribute('id');
  
  console.log(e_modalFadeId);
  
  const e_modalFade=document.querySelector('#'+e_modalFadeId);
  if(e_introductionTitle){
    e_introductionTitle.innerText=document.getElementById('introduction-title').value;
  }
  if(e_introductionText){
    e_introductionText.innerText=document.getElementById('introduction-text').value;
  }
  
  const e_canvas=e_modalFade.querySelector('canvas');
  const e_image = e_canvas.toDataURL("image/png");
  e_imgTarget.src = e_image; // 元の画像を上書き
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function() {
    if (xhr.readyState === 4 && xhr.status === 200) {
      console.log("画像が送信されました。");
      // 送信が成功した後の処理をここに追加する
    }
  };
  xhr.open("POST", sendUrl, true);
  xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
  xhr.send("image=" + encodeURIComponent(e_image));
}
/*/////*/

const e_html=document.querySelector('html');
const e_offcanvas=document.querySelector('[data-bs-toggle="offcanvas"]');
const a_offcanvasHash=document.querySelectorAll('.offcanvas a[href^="#"]');
e_offcanvas.addEventListener('click',()=>{
  e_html.classList.add('offcanvasOP');
});
console.log(a_offcanvasHash);
a_offcanvasHash.forEach((e)=>{
  e.addEventListener('click',()=>{
    setTimeout(()=>{
      e_html.classList.remove('offcanvasOP');
    },500);
  });
});
const e_menuTop=document.getElementById("menu_top");
const js_menutop=document.querySelector('.js-menutop');
const e_header=document.querySelector('header');
let r_footer;
window.onscroll = function () {  
  r_footer=document.querySelector('footer').getBoundingClientRect();
  if(window.pageYOffset > 20){
    e_header.classList.add('blur-w');
  }else{
    e_header.classList.remove('blur-w');
  }
  if ((window.pageYOffset > 400 || document.documentElement.scrollTop > 400 ) && r_footer.top > 1200){
    e_menuTop.style.bottom = "50px";
  } else {
    e_menuTop.style.bottom = "-200px";
  }
};

const backToTop=()=>{
window.scrollTo({
  top: 0,
  left: 0,
  behavior: 'smooth'
});
js_menutop.addEventListener("click", backToTop);
}

</script>
</body>
</html>
