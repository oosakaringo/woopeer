<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>MAP|子供食堂</title>
<meta name="robots" content="index, follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="MAP|子供食堂">
<meta name="format-detection" content="telephone=no">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600&family=Zen+Maru+Gothic:wght@500&display=swap" rel="stylesheet">
<link href="files/css/base.css" rel="stylesheet" type="text/css">
<style>
body {
  font-family: 'Noto Sans JP', sans-serif;
}
.ff-zen_maru {
  font-family: 'Zen Maru Gothic', sans-serif;
}
.max-1800 {
  max-width: 1800px;
}
.top-icons {
  left: var(--icon-left, auto);
  right: var(--icon-right, auto);
  top: var(--icon-top, auto);
  bottom: var(--icon-bottom, auto);
  width: var(--icon-width, auto);
  height: auto;
}
#map {
  height: 50vh;
  width: 100%;
}
#restaurant-list {
  max-height: 40vh;
  overflow-y: auto;
  padding-bottom: 20vh!important;
  scroll-behavior: smooth;
}
.restaurant-item {
  font-size: 10px;
}
.place_photo {
  max-height: 40vh;
  width: auto;
}

@media (min-width:768px) {/*TAB,PC*/
body {
  font-size: 1.2rem
}
.restaurant-item {
  font-size: 14px;
}
}

@media (min-width:992px) {/*PC*/
.top-icons:nth-child(n+5) {
  top: calc(var(--icon-top, auto) - 80px);
}
}

@media (min-width:2001px) {
footer {
  margin-top: 100px;
}
}

@media (max-width:767px) {/*SP*/
}
</style>
    <style>
        .white_paper {

            width:100%;
            font-size: 14px;
            background: white;
            padding: 2em;
            text-align: left;
            border-radius: 20px; /* 角の丸みを設定 */
        }
        .white_paper strong{ color: orangered; }

        .white_paper h2{
            font-size:120%;font-weight: bold;
        }
        .white_paper h3{
            font-size:100%;font-weight: bold;
        }
    </style>
</head>

<body class="bg-light">
<header class="ps-2 w-100 position-sticky">
  <div class="rounded-bottom-100 overflow-hidden move">
    <h1 class="text-center col-10 col-lg-6 mx-auto bg-primary text-white ffs-palt fw-bold mb-0">こども食堂とサポーターをマッチング</h1>
  </div>
  <div class="d-flex justify-content-between move max-1800 mx-auto align-items-lg-end">
    <div class="col-5 col-md-6 col-lg-3 max-280 text-center mb-1 move"><a href="/"><img src="./files/img/logo.svg" alt="" width="300" height="107" class="img-fluid"></a></div>
    <div class="d-none d-lg-flex p-0 small w-100 justify-content-evenly max-720 top-menu align-items-center mb-3"> <a href="/adults" class="text-decoration-none text-body small">おとなの方へ</a>| <a href="/map" class="text-decoration-none text-body small">食堂をさがす</a>| <a href="/rules" class="text-decoration-none text-body small">ルール</a>| <a href="/toiawase" class="text-decoration-none text-body small">お問い合わせ</a> </div>
    <div class="d-flex align-items-center gap-1 gap-lg-2 col-7 col-lg-2 gap-1 justify-content-end pe-2 filter-drop-shadow pt-3 move max-280"> <a href="/adults#organisation" class="btn btn-success rounded-circle p-0 d-flex flex-column justify-content-center square-w col-3 col-md-5 max-80">
      <div><img src="./files/img/icon_group_w.svg" alt="" width="32" height="28"></div>
      <div class="smaller fw-bold">団体様へ</div>
      </a> <a href="/login" class="btn btn-accent rounded-circle p-0 d-flex flex-column justify-content-center square-w col-3 col-md-5 max-80">
      <div><img src="./files/img/icon_user_w.svg" alt="" width="32" height="28"></div>
      <div class="smaller fw-bold">マイページ</div>
      </a>
      <button class="btn bg-white rounded-circle p-0 d-flex justify-content-center align-items-center square-w col-3 col-md-5 max-80 d-lg-none" aria-label="メニューボタン" data-bs-toggle="offcanvas" data-bs-target="#offcanvas_menu" aria-controls="offcanvas_menu"><img src="./files/img/icon_hamburger.svg" alt="" width="28" height="28"></button>
    </div>
  </div>
</header>
<div class="offcanvas offcanvas-end w-100 max-560 bg-light" tabindex="-1" id="offcanvas_menu">
  <div class="offcanvas-header py-1 justify-content-end">
    <button type="button" class="btn p-0 fs-3 text-primary" data-bs-dismiss="offcanvas" aria-label="Close"><i class="bi bi-x-lg"></i></button>
  </div>
  <div class="offcanvas-body text-center">
    <div class="col-8 max-320 mb-1 mx-auto"><img src="./files/img/logo.svg" alt="" width="400" height="200" class="img-fluid"></div>
    <p class="small ff-zen_maru">子供たちのための子ども食堂検索サイト</p>
    <div class="d-flex justify-content-center mb-5 pb-4"> <a href="/adults#organisation" class="d-flex align-items-center flex-column pe-5 border-end text-decoration-none text-body">
      <div class="mb-2 btn-success p-4 rounded-circle"><img src="./files/img/icon_group_w.svg" alt="" width="50" height="50"></div>
      <span class="fs-5">団体様へ</span></a> <a href="/mypage" class="d-flex align-items-center flex-column ps-5 text-decoration-none text-body">
      <div class="mb-2 btn-accent p-4 rounded-circle"><img src="./files/img/icon_user_w.svg" alt="" width="50" height="50"></div>
      <span class="fs-5">マイページ</span></a> </div>
    <a href="/adults"  class="btn btn-block col-10 mx-auto border-bottom">おとなの方へ</a> <a href="/map"  class="btn btn-block col-10 mx-auto border-bottom">食堂をさがす</a> <a href="/rules" class="btn btn-block col-10 mx-auto border-bottom">みんなのルール</a> <a href="/for_shop" class="btn btn-block col-10 mx-auto border-bottom">こども食堂運営者様へ</a> <a href="/toiawase" class="btn btn-block col-10 mx-auto">お問い合わせ</a> <a href="/for_supporter" class="btn ff-zen_maru bg-danger-subtle text-danger d-flex gap-3 col-8 justify-content-center align-items-center mx-auto filter-drop-shadow my-4"><img src="./files/img/icon_donation.svg" alt="" width="40" height="40">寄付の申し込み</a> </div>
</div>
<main>
  <article>
    <section class="pt-3 overflow-hidden">
      <h2 class="btn-secondary text-white ff-zen_maru text-center py-3 ffs-palt mb-0">プロフィール編集</h2>
      <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb" class="container py-2">
        <ol class="breadcrumb mb-0 ffs-palt align-items-center">
          <li class="breadcrumb-item"><a href="/" class="text-decoration-none text-body py-1">Home</a></li>
          <li class="breadcrumb-item"><a href="/shop/home" class="text-decoration-none text-body py-1">マイページ</a></li>
          <li class="breadcrumb-item active text-body" aria-current="page">プロフィール編集</li>
        </ol>
      </nav>
    </section>
    <section>
      <div class="container pb-5 mb-5">
        <div class="d-flex align-items-center gap-2 mb-3"> <span class="btn-success d-block p-2 rounded-circle"><img src="./files/img/icon_profile_w.svg" alt="" width="30" height="30"></span>
          <h3 class="fw-bold fs-5 border-bottom py-1 w-100 mb-0">プロフィール</h3>
        </div>
        <div class="text-md-center lh-lg position-relative">
          <div class="white_paper">
            <div class="box-section-01">
              <form name="form" method="post" novalidate="novalidate">
                <div class="row mb-3 d-none" >
                  <div class="col">*slug
                    <input type="text" id="form_slug" name="form[slug]" class="form-control form-control-solid form-control" placeholder="" value="0bz3xm" />
                  </div>
                </div>
                <h4 class="fw-bold fs-5 border-bottom py-1 w-100 mb-0">お店の場所について</h4>
                <div class="mt-3 mb-3 ">地図の中の施設をタップすると住所が入力されます。</div>
                <div id="map" style="width:100%;height:300px;"></div>
                <div class="row mb-3 ">
                  <div class="col">名称
                    <input type="text" id="form_name" name="form[name]" required="required" class="form-control form-control-solid form-control" placeholder="" style="background:#ffefef;" value="知床岬の子ども食堂" />
                  </div>
                </div>
                <div class="row mb-3 " style="display: none">
                  <div class="col-3">郵便番号
                    <input type="text" id="form_postalCode" name="form[postalCode]" required="required" class="form-control form-control-solid form-control" placeholder="" style="background:#ffefef;" value="099-4356" />
                  </div>
                  <div class="col-3">都道府県
                    <input type="text" id="form_prefecture" name="form[prefecture]" required="required" class="form-control form-control-solid form-control" placeholder="" style="background:#ffefef;" value="北海道" />
                  </div>
                  <div class="col-6">その他の住所
                    <input type="text" id="form_address" name="form[address]" required="required" class="form-control form-control-solid form-control" placeholder="" style="background:#ffefef;" value="斜里郡斜里町遠音別村イワウベツ" />
                  </div>
                </div>
                <div class="row mb-3 " style="display: none">
                  <div class="col">SpotId
                    <input type="text" id="form_googleSpotId" name="form[googleSpotId]" required="required" class="form-control form-control-solid form-control" readonly="readonly" style="background:silver;" value="ChIJ71PW7_WpbF8R3gj2dJnn93s" />
                  </div>
                  <div class="col">緯度 (Latitude)
                    <input type="text" id="form_latitude" name="form[latitude]" required="required" class="form-control form-control-solid form-control" readonly="readonly" style="background:silver;" value="44.345181" />
                  </div>
                  <div class="col">経度 (Longitude)
                    <input type="text" id="form_longitude" name="form[longitude]" required="required" class="form-control form-control-solid form-control" readonly="readonly" style="background:silver;" value="145.329705" />
                  </div>
                </div>
                <h4 class="fw-bold fs-5 border-bottom py-1 w-100 mb-0 mb-3">開催内容</h4>
                <div class="row mb-3 ">
                  <div class="col">ショートメッセージ
                    <textarea id="form_shortMessage" name="form[shortMessage]" class="form-control form-control-solid form-control" placeholder="例）コロナ期間が終わり再開しました！"></textarea>
                  </div>
                </div>
                <div class="row mb-3 ">
                  <div class="col">*紹介文
                    <textarea id="form_description" name="form[description]" required="required" class="form-control form-control-solid form-control" placeholder="例）誰にもやさしくひらかれた場所です。食堂以外にも、様々な地域活動を行っています。" style="background:#ffefef;">知床岬の子ども食堂</textarea>
                  </div>
                </div>
                <div class="row mb-3 ">
                  <div class="col">*開催日時
                    <textarea id="form_eventDate" name="form[eventDate]" required="required" class="form-control form-control-solid form-control" placeholder="例）毎週金曜日の15時から開催しています。" style="background:#ffefef;">不定期で開催</textarea>
                  </div>
                </div>
                <div class="row mb-3 ">
                  <div class="col">*料金
                    <textarea id="form_fee" name="form[fee]" required="required" class="form-control form-control-solid form-control" placeholder="例）小学６年生までは無料。" style="background:#ffefef;">基本的に無料です</textarea>
                  </div>
                </div>
                <h4 class="fw-bold fs-5 border-bottom py-1 w-100 mb-0 mb-3">連絡先</h4>
                <div class="row mb-3 ">
                  <div class="col">電話番号
                    <input type="text" id="form_phoneNumber" name="form[phoneNumber]" required="required" class="form-control form-control-solid form-control" placeholder="例）00-0000-0000" style="background:#ffefef;" value="080-1234-5678" />
                  </div>
                  <div class="col">Email
                    <input type="email" id="form_email" name="form[email]" class="form-control form-control-solid form-control" placeholder="" />
                  </div>
                </div>
                <div class="row mb-3 ">
                  <div class="col">URL
                    <input type="text" id="form_url" name="form[url]" inputmode="url" class="form-control form-control-solid form-control" placeholder="" />
                  </div>
                </div>
                <div class="row mb-3 ">
                  <div class="col">LINE
                    <input type="text" id="form_accountLine" name="form[accountLine]" class="form-control form-control-solid form-control" placeholder="" />
                  </div>
                  <div class="col">FACEBOOK
                    <input type="text" id="form_accountFacebook" name="form[accountFacebook]" class="form-control form-control-solid form-control" placeholder="" />
                  </div>
                  <div class="col">インスタグラム
                    <input type="text" id="form_accountInstagram" name="form[accountInstagram]" class="form-control form-control-solid form-control" placeholder="" />
                  </div>
                  <div class="col">X
                    <input type="text" id="form_accountX" name="form[accountX]" class="form-control form-control-solid form-control" placeholder="" />
                  </div>
                </div>
                <div style="text-align: center;padding:0.5em;margin:1em 0;">
                  <button class="btn btn-sm btn-primary">登録/更新</button>
                </div>
                <input type="hidden" id="form__token" name="form[_token]" value="9b5be704c0e638a7698049.NYdZiuwPVy_ORa8EeFzT0bkZ_VYPZjDcGnFLXFDcTKU.b-E9_dVJZnuZCuI9FjD-tPBuvDRYKFLofSFmDymJNc4M3SrZr0Y-cIFw_g" />
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  </article>
</main>
<footer class="">
  <div class="d-lg-flex align-items-center container mb-lg-4">
    <div class="mx-auto d-flex align-items-end gap-2 justify-content-center max-600 mb-4 col-lg-5 justify-content-lg-start">
      <div class="col-5 col-lg-6"><img src="./files/img/logo.svg" alt="" width="300" height="107" class="img-fluid" loading="lazy" decoding="async" ></div>
      <span class="ff-zen_maru small lh-sm">子供たちのための<br>
      子ども食堂検索サイト</span></div>
    <div class="d-flex container px-lg-0 mb-4 mb-lg-0 flex-lg-column small justify-content-evenly">
      <ul class="footer-link ps-0 mb-0 fw-bold d-lg-flex justify-content-evenly">
        <li class="d-block w-100"><a href="/adults" class="d-block text-body text-decoration-none py-2">おとなの方へ</a></li>
        <li class="d-block w-100"><a href="/map" class="d-block text-body text-decoration-none py-2">食堂をさがす</a></li>
        <li class="d-block w-100"><a href="/rules" class="d-block text-body text-decoration-none py-2">ルール</a></li>
      </ul>
      <ul class="footer-link ps-0 mb-0 fw-bold d-lg-flex">
        <li class="d-block w-100"><a href="/privacy_policy" class="d-block text-body text-decoration-none py-2">プライバシーポリシー</a></li>
        <li class="d-block w-100"><a href="/for_shop" class="d-block text-body text-decoration-none py-2">こども食堂運営者様へ</a></li>
        <li class="d-block w-100"><a href="/toiawase" class="d-block text-body text-decoration-none py-2">お問い合わせ</a></li>
      </ul>
    </div>
  </div>
  <a href="/for_supporter"  class="btn ff-zen_maru bg-danger-subtle text-danger d-flex gap-3 col-8 justify-content-center align-items-center mx-auto filter-drop-shadow mb-5 max-320"><img src="./files/img/icon_donation.svg" alt="" width="40" height="40" loading="lazy" decoding="async" >寄付の申し込み</a>
  <p class="text-center small py-3 mb-0 border-top">Copyright&copy;&nbsp; OPEN！こども食堂.All rights reserved. v240312a</p>
</footer>
<div id="menu_top" class="move js-menutop col-4 max-80 pe-4" style="z-index: 1040">
  <div class="rounded-circle filter-drop-shadow bg-white square-w d-flex justify-content-center align-items-center"> <i class="bi bi-arrow-up fs-2"></i></div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script> 
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script> 
<script>
let Lat = "44.345181";
let Lng = "145.329705";
let map;
let marker_start; // 初期説明マーカーを格納する変数
let marker_org;
let marker_new;

function initMap() {
  const hasLatLng = Lat && Lng;
  const mapOptions = {
    zoom: 15
  };

  map = new google.maps.Map(document.getElementById('map'), mapOptions);

  let service = new google.maps.places.PlacesService(map);

  if (hasLatLng) {
    var defaultLatlng = new google.maps.LatLng(Lat, Lng);
    map.setCenter(defaultLatlng);
    marker_org = new google.maps.Marker({
      position: defaultLatlng,
      map: map,
      icon: {
        url: './files/img/icon_addplace.svg',
        scaledSize: new google.maps.Size(30, 40)
      }
    });
  } else {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function (position) {
        var userLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        map.setCenter({ lat: userLocation.lat() + 0.002, lng: userLocation.lng() });
        marker_start = new google.maps.Marker({
          position: userLocation,
          map: map,
          icon: {
            url: './files/img/icon_start_alert.svg',
            scaledSize: new google.maps.Size(260, 130)
          }
        });
      }, function () {
        console.error("Geolocation is supported, but it failed");
      });
    } else {
      console.error("Geolocation is not supported by this browser.");
    }
    map.addListener('dragstart', () => {
      if (typeof marker_start !== 'undefined') marker_start.setMap(null);
    });
  }

  map.addListener('click', function (e) {
    if (e.placeId) {
      service.getDetails({
        placeId: e.placeId
      }, function (place, status) {
        if (status === google.maps.places.PlacesServiceStatus.OK) {
          if (typeof marker_org !== 'undefined') marker_org.setMap(null);
          if (typeof marker_new !== 'undefined') marker_new.setMap(null);
          marker_new = new google.maps.Marker({
            position: place.geometry.location,
            map: map,
            icon: {
              url: './files/img/icon_addplace.svg',
              scaledSize: new google.maps.Size(30, 40)
            }
          });
          var infowindow = new google.maps.InfoWindow({
            content: '<div><strong>' + place.name + '</strong><br>' + place.formatted_address + '</div>',
            pixelOffset: new google.maps.Size(0, 0)
          });
          infowindow.open(map, marker_new);
          map.panTo({ lat: place.geometry.location.lat() + 0.002, lng: place.geometry.location.lng() });

          document.getElementById('form_latitude').value = place.geometry.location.lat();
          document.getElementById('form_longitude').value = place.geometry.location.lng();
          document.getElementById('form_googleSpotId').value = place.place_id;
          document.getElementById('form_name').value = place.name;
          document.getElementById('form_address').value = removeCountryPostalCodeAndPrefecture(place);
        }
      });
    }
  });
}

function removeCountryPostalCodeAndPrefecture(place) {
  var formattedAddress = place.formatted_address;
  var country = place.address_components.find(component => component.types.includes("country")).long_name;
  var postalCode = place.address_components.find(component => component.types.includes("postal_code")).long_name;
  var prefecture = place.address_components.find(component => component.types.includes("administrative_area_level_1")).long_name;
  document.getElementById('form_postalCode').value = postalCode;
  document.getElementById('form_prefecture').value = prefecture;
  var cleanedAddress = formattedAddress.replace(country + "、", "").replace("〒" + postalCode, "").replace(prefecture, "");
  cleanedAddress = cleanedAddress.replace(/,\s+/g, ", ").trim();
  cleanedAddress = cleanedAddress.replace(/^,|,$/g, "");
  return cleanedAddress;
}

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAvdqDQ8LPts5_nmOcFIT-1cUhVuYbcaXo&libraries=places&callback=initMap" async defer></script> 
<script>

        const e_html=document.querySelector('html');
        const e_offcanvas=document.querySelector('[data-bs-toggle="offcanvas"]');
        const a_offcanvasHash=document.querySelectorAll('.offcanvas a[href^="#"]');
        e_offcanvas.addEventListener('click',()=>{
            e_html.classList.add('offcanvasOP');
        });
        console.log(a_offcanvasHash);
        a_offcanvasHash.forEach((e)=>{
            e.addEventListener('click',()=>{
                setTimeout(()=>{
                    e_html.classList.remove('offcanvasOP');
                },500);
            });
        });
        const e_menuTop=document.getElementById("menu_top");
        const js_menutop=document.querySelector('.js-menutop');
        const e_header=document.querySelector('header');
        let r_footer;
        window.onscroll = function () {
            r_footer=document.querySelector('footer').getBoundingClientRect();
            if(window.pageYOffset > 20){
                e_header.classList.add('blur-w');
            }else{
                e_header.classList.remove('blur-w');
            }
            if ((window.pageYOffset > 400 || document.documentElement.scrollTop > 400 ) && r_footer.top > 1200){
                e_menuTop.style.bottom = "50px";
            } else {
                e_menuTop.style.bottom = "-200px";
            }
        };

        const backToTop=()=>{
            window.scrollTo({
                top: 0,
                left: 0,
                behavior: 'smooth'
            });
            js_menutop.addEventListener("click", backToTop);
        }

    </script> 
<script>


</script>
</body>
</html>
